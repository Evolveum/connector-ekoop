<?xml version="1.0" encoding="UTF-8"?>
<objects xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
	xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
	xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3">
	<resource xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
          xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
          xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
          xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
          xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
          oid="44dc6829-8e28-4a72-9bdc-2a4787ca9931"
          version="2">
   <name>E-Koop Mockup Sample</name>
   <operationalState>
      <lastAvailabilityStatus>up</lastAvailabilityStatus>
   </operationalState>
   <connectorRef type="c:ConnectorType">
      <filter>
         <q:equal>
            <q:path>c:connectorType</q:path>
            <q:value>com.evolveum.polygon.connector.ekoop.EKoopConnector</q:value>
         </q:equal>
      </filter>
   </connectorRef>
   <connectorConfiguration xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3">
      <icfc:configurationProperties xmlns:gen398="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/bundle/com.evolveum.polygon.connector-ekoop/com.evolveum.polygon.connector.ekoop.EKoopConnector">
         <gen398:useMockup>true</gen398:useMockup>
      </icfc:configurationProperties>
   </connectorConfiguration>
   <schemaHandling>
      <objectType>
         <kind>account</kind>
         <intent>default</intent>
         <displayName>PRL_SYS_USERS</displayName>
         <default>true</default>
         <objectClass>ri:AccountObjectClass</objectClass>
         <attribute>
            <c:ref>icfs:uid</c:ref>
            <displayName>TCKN in UID</displayName>
            <limitations>
               <access>
                  <read>true</read>
               </access>
            </limitations>
         </attribute>
         <attribute>
            <c:ref>icfs:name</c:ref>
            <displayName>tckn</displayName>
            <limitations>
               <minOccurs>0</minOccurs>
            </limitations>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>extension/TCKN</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:name</c:ref>
            <displayName>NAME</displayName>
             <limitations>
                 <minOccurs>0</minOccurs>
             </limitations>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>name</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:givenName</c:ref>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>givenName</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:familyName</c:ref>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>familyName</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:calistigiil</c:ref>
            <displayName>City name</displayName>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>locality</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:telephoneNumber</c:ref>
            <outbound>
               <strength>strong</strength>
               <source>
                  <c:path>telephoneNumber</c:path>
               </source>
            </outbound>
         </attribute>
         <attribute>
            <c:ref>ri:cepTel2</c:ref>
            <displayName>second phone number - from Cost Center for DEMO</displayName>
            <outbound>
               <strength>strong</strength>
               <source>
                  <!-- in production please use $user/extension/cepTel2 -->
                  <c:path>costCenter</c:path>
               </source>
            </outbound>
         </attribute>
         <activation>
            <administrativeStatus>
               <outbound>
                  <strength>strong</strength>
                  <expression>
                     <asIs/>
                  </expression>
               </outbound>
            </administrativeStatus>
         </activation>
      </objectType>
   </schemaHandling>
   <synchronization>
      <objectSynchronization>
         <name>PLR Sys Users sync</name>
         <objectClass>ri:AccountObjectClass</objectClass>
         <kind>account</kind>
         <intent>default</intent>
         <enabled>true</enabled>
         <correlation>
            <q:equal>
               <q:path>c:extension/TCKN</q:path>
               <expression>
                  <c:path>$account/attributes/uid</c:path>

               </expression>
            </q:equal>
         </correlation>
         <!-- in your config please use:

         <correlation>
            <q:equal>
               <q:path>c:extension/TCKN</q:path>
               <expression>
                  <c:path>$shadow/attributes/uid</c:path>
               </expression>
            </q:equal>
            <condition>
               <script>
                  <code>
                  import static com.evolveum.midpoint.schema.constants.SchemaConstants.*
                  println(basic.getAttributeValue(shadow, ICFS_UID))
                  basic.getAttributeValue(shadow, ICFS_UID) != null
                 </code>
               </script>
            </condition>
         </correlation>
         -->
         <reaction>
            <situation>linked</situation>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#modifyUser</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>deleted</situation>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#unlinkAccount</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unlinked</situation>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#linkAccount</handlerUri>
            </action>
         </reaction>
         <reaction>
            <situation>unmatched</situation>
            <action>
               <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/action-3#addFocus</handlerUri>
            </action>
         </reaction>
      </objectSynchronization>
   </synchronization>
</resource>
</objects>